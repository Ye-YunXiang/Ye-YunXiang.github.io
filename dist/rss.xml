<?xml version="1.0" encoding="UTF-8"?><?xml-stylesheet href="/scripts/pretty-feed-v3.xsl" type="text/xsl"?><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:h="http://www.w3.org/TR/html4/"><channel><title>PoetryCloud</title><description>æ„šè€…å…ˆè¡Œ.</description><link>https://poetrycld.com</link><item><title>å•ç‰‡æœºä¸­5ç§å¸¸è§ç®€å•æ»¤æ³¢å™¨</title><link>https://poetrycld.com/blog/2025/2512-mcusimplefilter</link><guid isPermaLink="true">https://poetrycld.com/blog/2025/2512-mcusimplefilter</guid><description>å•ç‰‡æœºç®€å•æ»¤æ³¢å™¨æ€è·¯è§£æï¼Œé™„å¸¦ä½¿ç”¨ä»£ç ã€‚</description><pubDate>Thu, 25 Dec 2025 22:37:00 GMT</pubDate><content:encoded>&lt;p&gt;MCUå¼€å‘è¿‡ç¨‹ä¸­é‡‡é›†å„ç±»æ•°æ®ï¼Œæ— è®ºæ˜¯ç®€å•çš„æ¸©åº¦ã€ç”µå‹ã€ç”µæµï¼Œç”šè‡³æ˜¯æ‘„åƒå¤´ä¼ å‡ºæ¥çš„å›¾åƒæ•°æ®ï¼Œå¤šå°‘éƒ½ä¼šå—åˆ°ç”µè·¯å™ªå£°ã€ç¯å¢ƒå™ªå£°çš„å½±å“ï¼Œå¯¼è‡´è¢«å™ªå£°å½±å“çš„æ•°æ®è§¦å‘äº†åŠŸèƒ½æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥å·¥ç¨‹å¸ˆä»¬å¯¹äºé‡‡é›†åˆ°çš„æ•°æ®è¦æœ‰ä¸€å®šçš„æ•æ„Ÿåº¦ï¼Œä¸èƒ½æ‹¿æ¥å°±ç”¨ã€‚è¿™æ—¶å¸¸è§çš„æ»¤æ³¢å™¨å°±èƒ½å¯¹æ”¶é›†åˆ°çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œè¿‡æ»¤å¹³æ»‘æ”¶é›†çš„æ•°æ®ï¼Œé˜²æ­¢è¢«å™ªå£°å½±å“ã€‚&lt;/p&gt;
&lt;p&gt;å‰ä¸‰è€…æ»¤æ³¢å™¨ä¸»æ‰“å¤§åŠ›å‡ºå¥‡è¿¹ï¼Œåœ¨è¿ç»­çš„å¤šç‚¹æ•°æ®ä¸­å¾—åˆ°æƒ³è¦çš„æ•°æ®ï¼Œä½¿ç”¨å‡å€¼æˆ–ä¸­ä½å€¼çš„æ–¹å¼ï¼ŒæŠ‘åˆ¶æ•°æ®çš„æ³¢åŠ¨ï¼Œä»¥è¾¾åˆ°å¹³æ»‘çš„æ•ˆæœï¼›ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œä½¿ç”¨è¿ç»­å¤šç‚¹å¤„ç†å¾—å‡ºæ•°æ®ï¼Œä¼šå¯¼è‡´æ•°æ®æ»åï¼Œçª—å£è¶Šå¤§ï¼Œæ»åæ€§è¶Šå¼ºã€‚&lt;/p&gt;
&lt;p&gt;åä¸¤è€…åˆ™æ˜¯æ•°æ®è¿­ä»£çš„æ€æƒ³ï¼Œæ¯æ¬¡ç»“æœçš„éƒ½æ˜¯ä¾é ä¸Šæ¬¡æ»¤æ³¢å™¨çš„ç»“æœå’Œæœ¬æ¬¡è¾“å…¥å€¼ï¼Œç»è¿‡æƒé‡åˆ†é…è¾“å‡ºç»“æœã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡æä¾›ä»£ç ä»…ä¾›æ€è·¯å‚è€ƒï¼Œå®é™…ä½¿ç”¨è¯·æ ¹æ®é¡¹ç›®é€‚é…ï¼å…·ä½“æ•ˆæœå·®å¼‚è¯·è‡ªå·±å°è¯•æ–¹å¯çŸ¥é“å¯¹æ•°æ®çš„å½±å“ï¼Œè¿™é‡Œåªè®²æ€è·¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;ä¸€ã€æ»‘åŠ¨å¹³å‡æ»¤æ³¢å™¨&lt;/h2&gt;
&lt;p&gt;æ€è·¯ï¼šå–å›ºå®šé•¿åº¦çš„çª—å£ï¼Œå¯¹è¿ç»­çš„æ•°æ®ç›¸åŠ ï¼Œå–å‡å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šä¸é€‚åˆè„‰å†²å¹²æ‰°æ¯”è¾ƒä¸¥é‡çš„åœºåˆï¼Œçµæ•åº¦ä½ï¼Œæ»åæ€§è¾ƒå¼ºã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ç®€å•ï¼Œè®¡ç®—é€Ÿåº¦æœ€å¿«çš„æ»¤æ³¢å™¨ï¼Œåœ¨æ•°æ®ä¸Šä¸‹æ³¢åŠ¨ä¸æ˜¯å¾ˆå¤§ï¼Œå¹¶ä¸”ä¸æ‹…å¿ƒå»¶è¿Ÿçš„åœºæ™¯å¯ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æ»‘åŠ¨çš„è¿‡ç¨‹å¯ä»¥æ˜¯è¿ç»­çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç‰‡æ®µçš„ï¼Œè¿™é‡Œæ ¹æ®å®é™…ä½¿ç”¨åœºæ™¯è‡ªå·±å†³å®šã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;./assets/image-20251215223852-y0r1ysh.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç®—æ³•ä¸­ä¸ä¸€å®šè¦ä½¿ç”¨æ»‘åŠ¨çª—å£ï¼Œåœ¨å‡½æ•°å†…ä½¿ç”¨é™æ€å˜é‡è®¡æ•°å¹¶ç´¯åŠ è¾“å…¥å€¼ï¼Œåˆ°æŒ‡å®šè®¡æ•°å€¼åè®¡ç®—å‡å€¼ï¼Œæ¸…é™¤è®¡æ•°å’Œç´¯è®¡çš„æ•°æ®å€¼é‡æ–°è®¡æ•°ï¼Œè¿™åœ¨å®é™…åº”ç”¨ä¸­æ›´ä¸ºå¸¸è§ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-c&quot;&gt;// è¿™é‡Œç®€å•é™æ€æ»‘åŠ¨çª—å£æ¡ˆä¾‹
#include &amp;#x3C;stdbool.h&gt;

#define MOVING_AVG_BUF_SIZE 	(5) // å®šä¹‰æ»‘åŠ¨çª—å£å¤§å°

typedef struct {
    float buf[MOVING_AVG_BUF_SIZE];    // ç¯å½¢ç¼“å†²åŒºå­˜å‚¨å†å²æ•°æ®
    float sum;     						// ç¼“å†²åŒºæ•°æ®çš„æ€»å’Œ
	int index;     						// å½“å‰ç¼“å†²åŒºä½ç½®
	bool buf_full;						// ç¼“å†²åŒºæ»¡äº†
} moving_avg_st;

// åˆå§‹åŒ–æ»‘åŠ¨å¹³å‡æ»¤æ³¢å™¨
void moving_avg_init(moving_avg_st *filter) 
{
    filter-&gt;index = 0;
    filter-&gt;sum = 0.0f;
	filter-&gt;buf_full = false;
    for (int i = 0; i &amp;#x3C; MOVING_AVG_BUF_SIZE; i++) 
	{
        filter-&gt;buf[i] = 0.0f;
    }
}

// æ›´æ–°æ»¤æ³¢å™¨å¹¶è®¡ç®—å½“å‰å¹³å‡å€¼
float moving_avg_updata(moving_avg_st *filter, float input) 
{
	int current_buf_size = MOVING_AVG_BUF_SIZE;

	if (!filter-&gt;buf_full)
	{
		current_buf_size = filter-&gt;index + 1;
	}

    // å‡å»å³å°†è¢«æ›¿æ¢çš„æ—§æ•°æ®ï¼ˆå¦‚æœç¼“å†²åŒºå·²æ»¡ï¼‰
    if (filter-&gt;buf_full) 
	{
        filter-&gt;sum -= filter-&gt;buffer[filter-&gt;index];
    }
	else if (current_buf_size &gt;= MOVING_AVG_BUF_SIZE)
	{
		filter-&gt;buf_full = true;
	}

    // æ·»åŠ æ–°æ•°æ®åˆ°ç¼“å†²åŒº
    filter-&gt;buf[index] = input;
    filter-&gt;sum += input;
    filter-&gt;index = (filter-&gt;index + 1) % MOVING_AVG_BUF_SIZE;

    return filter-&gt;sum / current_buf_size ;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;äºŒã€ä¸­ä½å€¼æ»¤æ³¢å™¨&lt;/h2&gt;
&lt;p&gt;æ€è·¯ï¼šå–å›ºå®šé•¿åº¦çš„çª—å£ï¼Œå¯¹çª—å£å†…æ•°æ®è¿›è¡Œæ’åºï¼Œå–ä¸­ä½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šæ¯æ¬¡éƒ½éœ€è¦è®¡ç®—æ’åºï¼Œå½±å“æ€§èƒ½ï¼›å¯¹å¿«é€Ÿçš„ä¿¡å·å˜åŒ–ååº”æ¯”è¾ƒæ…¢ã€‚&lt;/p&gt;
&lt;p&gt;ä¸­ä½å€¼æ»¤æ³¢å™¨å»å™ªæ•ˆæœå¥½ï¼Œæ¯æ¬¡éƒ½æ˜¯å–è¿ç»­æ•°æ®çš„ä¸­å€¼ï¼Œè¿™èƒ½æœ‰æ•ˆçš„è¿‡æ»¤å¼‚å¸¸æ•°æ®ï¼Œå¹¶ä¿æŒä¿¡å·çš„åŸå§‹ç‰¹å¾ï¼›åœ¨åªéœ€è¦è¿‡æ»¤æ•°æ®å¼‚å¸¸å€¼çš„åœºæ™¯ä¸Šå¾ˆé€‚ç”¨ï¼Œæ¯”å¦‚å¶å°”å‡ºç°çš„ä¸€ä¸¤ä¸ªæœ€å¤§æˆ–æœ€å°çš„æå€¼ï¼Œè¿™é‡Œèƒ½æœ‰æ•ˆæ»¤é™¤ã€‚&lt;/p&gt;
&lt;p&gt;ä¸­å€¼æ»¤æ³¢ä¸ä¸€å®šè¦ä½¿ç”¨æ»‘åŠ¨çª—å£ï¼Œç¼“å†²åŒºç´¯è®¡æ•°æ®åˆ°æŒ‡å®šå¤§å°å–ä¸­å€¼ï¼Œç„¶ååœ¨æ¸…ç©ºç¼“å†²åŒºé‡æ–°ç´¯è®¡ä¹Ÿæ˜¯å¸¸è§åšæ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;./assets/image-20251215223908-gwpepgv.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-c&quot;&gt;// è¿™é‡Œç®€å•é™æ€æ»‘åŠ¨çª—å£æ¡ˆä¾‹
// ä¸­ä½å€¼æ»¤æ³¢çª—å£è‡³å°‘è¦å¤§äº 3, å¹¶ä¸”ä¸ºå¥‡æ•°æœ€ä½³
#include &amp;#x3C;stdbool.h&gt;

#define MOVING_MEDIAN_BUF_SIZE 	(5) // å®šä¹‰æ»‘åŠ¨çª—å£å¤§å°

typedef struct {
    int buf[MOVING_MEDIAN_BUF_SIZE];    // ç¯å½¢ç¼“å†²åŒºå­˜å‚¨å†å²æ•°æ®
	int index;     						// å½“å‰ç¼“å†²åŒºä½ç½®
	bool buf_full;						// ç¼“å†²åŒºæ»¡äº†
} moving_median_st;

// åˆå§‹åŒ–æ»‘åŠ¨å¹³å‡æ»¤æ³¢å™¨
void moving_median_init(moving_median_st *filter) 
{
    filter-&gt;index = 0;
	filter-&gt;buf_full = false;
	memset(filter-&gt;buf, 0, sizeof(filter-&gt;buf));
}

// æ›´æ–°æ»¤æ³¢å™¨å¹¶è®¡ç®—å½“å‰å¹³å‡å€¼
int moving_median_updata(moving_median_st *filter, int input) 
{
	int result = 0;

	// æ·»åŠ æ–°æ•°æ®åˆ°ç¼“å†²åŒº
    filter-&gt;index = filter-&gt;index % MOVING_MEDIAN_BUF_SIZE;
    filter-&gt;buf[filter-&gt;index] = input;
    filter-&gt;index++;
    

	if (!filter-&gt;buf_full &amp;#x26;&amp;#x26; filter-&gt;index &gt;= MOVING_MEDIAN_BUF_SIZE)
	{
		filter-&gt;buf_full = true;
	}

    if (filter-&gt;buf_full) 
	{
        int arr[MOVING_MEDIAN_BUF_SIZE];
		memcpy(arr, filter-&gt;buf, sizeof(filter-&gt;buf));
		// æ’åº
		bubble_sort(arr, MOVING_MEDIAN_BUF_SIZE);
		// å–ä¸­é—´å€¼
		result = arr[ MOVING_MEDIAN_BUF_SIZE/2];
    }
	else
	{
		result = input;
	}

    return result;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;ä¸‰ã€ä¸­ä½å€¼å¹³å‡æ»¤æ³¢&lt;/h2&gt;
&lt;p&gt;æ€è·¯ï¼šå›ºå®šçª—å£å–è¿ç»­çš„å‡ ç‚¹ï¼Œå»æ‰æœ€é«˜çš„å‡ ä¸ªæ•°æ®ï¼Œå»æ‰æœ€ä½çš„å‡ ä¸ªæ•°æ®ï¼Œå‰©ä½™æ•°æ®å–å‡å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šæ¯æ¬¡éƒ½éœ€è¦è®¡ç®—æ’åºæ¯”è¾ƒæ¶ˆè€—æ€§èƒ½ï¼Œåœ¨å¿«é€Ÿå˜åŒ–å¤§çš„æƒ…å†µä¸‹ä¼šäº§ç”Ÿâ€œé˜¶æ¢¯æ•ˆåº”â€ï¼Œå› ä¸ºå‡å€¼æ—¶æ•°æ®ä¼šå—åˆ°æ—§å°æ•°æ®çš„å½±å“ï¼Œå°±å‡ºç°é˜¶æ¢¯çš„å½¢çŠ¶ã€‚&lt;/p&gt;
&lt;p&gt;ä¸­ä½å€¼å¹³å‡æ»¤æ³¢ç»“åˆäº†ä¸­å€¼æ»¤æ³¢çš„è¿‡æ»¤å¼‚å¸¸å€¼ï¼Œå¹¶ä¸”ä¹Ÿç»“åˆäº†å‡å€¼æ»¤æ³¢çš„ç¨³å®šæ•°æ®ï¼Œå°çª—å£ä¸‹è¿˜èƒ½å¤šä¿ç•™äº›ç»†èŠ‚ï¼Œä½†æ•°æ®å˜åŒ–è¾ƒå¤§æ—¶ï¼Œå˜åŒ–æ›²çº¿å®¹æ˜“å‘ˆç°é˜¶æ¢¯çŠ¶ï¼›æ•°æ®å¸¦æœ‰ä¸ªåˆ«å™ªç‚¹ï¼ŒåŒæ—¶åˆåœ¨å°å¹…åº¦æŠ–åŠ¨ï¼Œå¯ä½¿ç”¨æœ¬æ»¤æ³¢å™¨ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;./assets/image-20251215223922-now9eik.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä»£ç ä¸Šå°±æ˜¯åœ¨ä¸­å€¼æ»¤æ³¢ä¸Šå¢åŠ äº†å»é™¤æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå‡å€¼ä¸­é—´å‡ ç‚¹æ•°æ®å‡ºç»“æœï¼›ä½†å¦‚æœå°ä¸€ç»´çª—å£å¯ä»¥æ›´ç®€å•äº›ï¼Œä¸ç”¨æ’åºã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-c&quot;&gt;// è¿™é‡Œç®€å•é™æ€æ»‘åŠ¨çª—å£æ¡ˆä¾‹
// ä¸­ä½å€¼å¹³å‡æ»¤æ³¢ï¼Œè¿™é‡Œæ¡ˆä¾‹æ˜¯å¸¸ç”¨çª—å£5ç‚¹ï¼Œå»é™¤æœ€å¤§æœ€å°ç‚¹ï¼Œæ— éœ€æ’åºã€‚
#include &amp;#x3C;stdbool.h&gt;

#define MOVING_MEDIAN_AVG_BUF_SIZE 	(5) // å®šä¹‰æ»‘åŠ¨çª—å£å¤§å°

typedef struct {
    int buf[MOVING_MEDIAN_AVG_BUF_SIZE];    // ç¯å½¢ç¼“å†²åŒºå­˜å‚¨å†å²æ•°æ®
	int index;     						// å½“å‰ç¼“å†²åŒºä½ç½®
	bool buf_full;						// ç¼“å†²åŒºæ»¡äº†
} moving_median_avg_st;

// åˆå§‹åŒ–æ»‘åŠ¨å¹³å‡æ»¤æ³¢å™¨
void moving_median_init(moving_median_avg_st *filter) 
{
    filter-&gt;index = 0;
	filter-&gt;buf_full = false;
	memset(filter-&gt;buf, 0, sizeof(filter-&gt;buf));
}

// æ›´æ–°æ»¤æ³¢å™¨å¹¶è®¡ç®—å½“å‰å¹³å‡å€¼
int moving_median_updata(moving_median_avg_st *filter, int input) 
{
	int result = 0;

	// æ·»åŠ æ–°æ•°æ®åˆ°ç¼“å†²åŒº
    filter-&gt;index = filter-&gt;index % MOVING_MEDIAN_AVG_BUF_SIZE;
    filter-&gt;buf[filter-&gt;index] = input;
    filter-&gt;index++;
    

	if (!filter-&gt;buf_full &amp;#x26;&amp;#x26; filter-&gt;index &gt;= MOVING_MEDIAN_AVG_BUF_SIZE)
	{
		filter-&gt;buf_full = true;
	}

    if (filter-&gt;buf_full) 
	{
        int max_vlue = filter-&gt;buf[0];
        int min_value = max_vlue;
        int sun = 0;

        for (int i = 1; i &amp;#x3C; MOVING_MEDIAN_AVG_BUF_SIZE; i++)
        {
            int vlue = filter-&gt;buf[i];
            if (vlue &gt; max_vlue)
            {
                max_vlue = vlue;
            }
            
            if (vlue &amp;#x3C; min_value)
            {
                min_value = vlue;
            }

            sun += vlue;
        }

        result = sun / (MOVING_MEDIAN_AVG_BUF_SIZE - 2);
    }
	else
	{
		result = input;
	}

    return result;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;å››ã€æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡æ»¤æ³¢&lt;/h2&gt;
&lt;p&gt;æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡æ»¤æ³¢ï¼ˆEWMAï¼‰ï¼Œè¿™ä¸€ä¸²åè¯è¹¦å‡ºæ¥æŒºé«˜å¤§ä¸Šçš„ï¼Œå…¶å®æ²¡å•¥ï¼Œå…ˆçœ‹å…¶å…¬å¼ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;./assets/image-20251216100247-jdtagtg.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;tè¡¨ç¤ºå½“å‰æ—¶é—´ï¼›vä¸ºç»è¿‡æ»¤æ³¢å™¨çš„æ•°æ®ï¼›Î¸ä¸ºå½“å‰è¾“å…¥å€¼ï¼›Î²ä¸ºæƒé‡ç³»æ•°ï¼Œæ˜¯ä¸¤ä¸ªæ•°æ®åœ¨ç»“æœä¸­æ‰€å çš„ç™¾åˆ†æ¯”ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå®šä¸Šä¸€æ—¶é—´çš„ç»“æœæƒé‡40%ï¼Œæ‰€ä»¥æ ¹æ®å…¬å¼ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ»¤æ³¢ç»“æœ t= æ»¤æ³¢ç»“æœt-1 * 0.3 + ï¼ˆ1 - 0.3ï¼‰* è¾“å…¥æ•°æ®tã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“ç„¶æ¯æ¬¡çš„æ»¤æ³¢ç»“æœéƒ½éœ€è¦è®°å½•ä¸‹æ¥ä¸æ–­æ›´æ–°ï¼Œå¹¶åº”ç”¨åˆ°ä¸‹æ¬¡è®¡ç®—å½“ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æ»¤æ³¢åçš„æ•°æ®ä¼šå—åˆ°å†å²æ•°æ®çš„å½±å“ä¸ä¼šè·³åŠ¨å¤ªå¤§ï¼Œèƒ½å¤Ÿåæ˜ å‡ºæ¥ä¸‹æ¥æ•°æ®å˜åŒ–çš„è¶‹åŠ¿ï¼Œä½†ç”±äºå—åˆ°æ—§æ•°æ®çš„å½±å“ï¼Œæ•´ä½“è¶‹åŠ¿ä¼šæœ‰ä¸€å®šçš„æ»åã€‚ï¼ˆåš¼ç¢äº†å•Šå–‚ï¼Œè¯·åŠ¨åŠ¨å°è„‘è¢‹å¥½å¥½ç†è§£ä¸€ä¸‹ï¼‰&lt;/p&gt;
&lt;p&gt;æ€è·¯ï¼šå¯¹å†å²ç»“æœä¹˜å›ºå®šç™¾åˆ†æ¯”Î²ï¼Œæœ€æ–°æ•°æ®ä¹˜ï¼ˆ1-Î²ï¼‰çš„ç™¾åˆ†æ¯”ï¼Œä¸¤è€…ç›¸åŠ åå¾—åˆ°è¾“å‡ºå€¼ï¼Œå¹¶ä¸”è¾“å‡ºå€¼æ›´æ–°å€¼å†å²ç»“æœç”¨äºä¸‹æ¬¡è®¡ç®—ï¼›&lt;em&gt;å†å²ç»“æœå’Œæœ€æ–°æ•°æ®æ‰€å çš„æƒé‡ç›¸åŠ ç­‰äº1&lt;/em&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒå¯¹æ•°æ®å¹³æ»‘çš„æ•ˆæœæ— æ•Œï¼Œä½†æ˜¯è¿‡åº¦å¹³æ»‘ä¼šå¯¼è‡´æ•°æ®å¤±çœŸï¼Œæ‰€ä»¥éœ€è¦è°ƒæ•´å‚æ•° Î² æ¥è¾¾åˆ°æƒ³è¦çš„æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;./assets/image-20251216103945-0gfffg5.jpg&quot; alt=&quot;image&quot; title=&quot;å›¾ç‰‡æ¥æºï¼šhttps://blog.csdn.net/qq_42363032&quot;&gt;
å›¾ç‰‡æ¥æºï¼šhttps://blog.csdn.net/qq_42363032&lt;/p&gt;
&lt;p&gt;ç•™ä¸‹ä½œä¸šï¼šä¸‹æ–¹ä»£ç è¿™æ ·å°±å¤Ÿäº†å˜›ï¼Œå¦‚æœä½¿ç”¨åœ¨æ¸©åº¦æ£€æµ‹ä¸Šï¼ŒçœŸå®æ•°æ®çªç„¶å˜å¾—å¾ˆå¤§ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿæœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥ç¼“è§£å› ä¸ºæ¸©åº¦éª¤å‡æˆ–éª¤é™è€Œå¤±çœŸå»¶è¿Ÿå¤ªå¤§çš„é—®é¢˜ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-c&quot;&gt;// æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡

#define EWMA_SMOOTH_ALPHA_EDGE 1.0f      // è¾¹ç¼˜å½“å‰è´¨å¿ƒæƒé‡å æ¯”
#define EWMA_SMOOTH_ALPHA_SMOOTH 0.3f    //å¹³æ»‘åå‚æ•°
#define EWMA_TRANSITION_STEPS_COUNT  3   //æ”¶æ•›é€Ÿåº¦

// æŒ‡æ•°å‡å€¼ç§»åŠ¨æ»¤æ³¢å¯¹è±¡
typedef struct{
    float prev_smoothed_value;      // å­˜å‚¨ä¸Šä¸ªå€¼
    float alpha;                    // æƒé‡
}ewma_smoother_st;

// æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡-------------------------------------------------------------
void ema_smoother_init(ewma_smoother_st *ewma)
{
    ewma-&gt;prev_smoothed_value = 0.0f;
    ewma-&gt;alpha = EWMA_SMOOTH_ALPHA_SMOOTH;
}

/**
 * æŒ‡æ•°åŠ æƒç§»åŠ¨æ›´æ–°
*/
float ema_smoother_update(ewma_smoother_st *ewma, float current_value) 
{
    // åŠ¨æ€è°ƒæ•´å¹³æ»‘ç³»æ•°
    if (ewma-&gt;alpha &gt; EWMA_SMOOTH_ALPHA_SMOOTH)
    {   
        ewma-&gt;alpha -= ((EWMA_SMOOTH_ALPHA_EDGE - EWMA_SMOOTH_ALPHA_SMOOTH)
            * (1.0f / EWMA_TRANSITION_STEPS_COUNT));
    }
    else
    {
        ewma-&gt;alpha = EWMA_SMOOTH_ALPHA_SMOOTH;
    }

    ewma-&gt;prev_smoothed_value = ewma-&gt;alpha  * current_value + (1.0f - ewma-&gt;alpha ) * ewma-&gt;prev_smoothed_value;
    return ewma-&gt;prev_smoothed_value;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;äº”ã€ä¸€ç»´å¡å°”æ›¼æ»¤æ³¢å™¨&lt;/h2&gt;
&lt;p&gt;ç»å…¸å¡å°”æ›¼æ»¤æ³¢ï¼Œè¿™é‡Œå…ˆç®€å•è§£é‡Šä¸€ä¸‹ä¸€ç»´å¡å°”æ›¼ï¼Œåç»­åœ¨åšä¸“é¢˜ä»”ç»†ä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;æ€è·¯ï¼šå®ƒæ˜¯é€šè¿‡ä¹‹å‰æ•°æ®çš„æµ‹é‡è¯¯å·®é¢„æµ‹ä¸‹ä¸€æ•°æ®çš„å€¼ï¼Œç„¶åç”¨è¿™ä¸ªå€¼å»ä¿®æ­£æµ‹é‡å‡ºçš„ä¸‹ä¸€æ•°æ®ï¼Œå¾—å‡ºç»“æœï¼Œå¹¶è®°æ›´æ–°æµ‹é‡è¯¯å·®ç”¨äºä¸‹æ¬¡è®¡ç®—ï¼Œæœ¬è´¨æ˜¯æŒ‡æ•°åŠ æƒç§»åŠ¨æ»¤æ³¢(EWMA)åŠ ä¸Šæ›´å¤æ‚çš„åŠ¨æ€ç³»ç»Ÿæ¨¡å‹ï¼Œè¿›è¡Œæ›´ä¸ºç³»ç»ŸåŒ–çš„åŠ¨æ€æƒé‡è®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ç»´å¡å°”æ›¼æŒ‡å®šäº†å›ºå®šçš„Q(è¿‡ç¨‹å™ªå£°)å’ŒR(æµ‹é‡å™ªå£°)ï¼ŒQååº”äº†æ¨¡å‹é¢„æµ‹çš„è¯¯å·®ï¼Œè¶Šé«˜åˆ™è¡¨ç¤ºæ¨¡å‹è¶Šä¸å¯é ï¼Œé¢„æµ‹å€¼æƒé‡å æ¯”è¶Šä½ï¼Œåä¹‹äº¦ç„¶ï¼›Rè¡¨ç¤ºä¼ æ„Ÿå™¨æµ‹é‡çš„è¯¯å·®ï¼Œè¶Šé«˜è¡¨ç¤ºæµ‹é‡å™ªå£°è¶Šå¤§ï¼Œæµ‹é‡å€¼æƒé‡å æ¯”è¶Šä½ï¼Œåæ­£äº¦ç„¶ã€‚&lt;/p&gt;
&lt;p&gt;å¡æ›¼è®¡ç®—æ»¤æ³¢è®¡ç®—æµç¨‹å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;./assets/image-20251216145043-d8v9qn5.jpg&quot; alt=&quot;image&quot; title=&quot;å›¾ç‰‡æ¥æºï¼šhttps://zhuanlan.zhihu.com/p/492776982&quot;&gt;
å›¾ç‰‡æ¥æºï¼šhttps://zhuanlan.zhihu.com/p/492776982&lt;/p&gt;
&lt;p&gt;ç”±äºä¸€ç»´å¡å°”æ›¼çš„F(çŠ¶æ€è½¬ç§»çŸ©é˜µ)å’ŒH(è§‚æµ‹çŸ©é˜µ)é€€åŒ–ä¸ºæ ‡é‡1ï¼Œå› æ­¤åªèƒ½æ»¤æ³¢é™æ€å™ªå£°ï¼Œæ— æ³•ç”¨äºåŠ¨æ€è·Ÿè¸ªã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-c&quot;&gt;//ä¸€ç»´ç®€å•é™æ€å¡å°”æ›¼ 

typedef struct 
{
    float x;  // çŠ¶æ€ä¼°è®¡â€”â€”æ»¤æ³¢ç»“æœ
    float p;  // ä¼°è®¡åæ–¹å·®

    float q;  // è¿‡ç¨‹å™ªå£°â€”â€”æ¨¡å‹ä¸ç¡®å®šæ€§
    float r;  // æµ‹é‡å™ªå£°â€”â€”ä¼ æ„Ÿå™¨å™ªå£°
}kalman_1d_st;

// å¡å°”æ›¼æ»¤æ³¢å™¨
void kalman1d_init(kalman_1d_st * kf, float init_x, float init_p, float init_q, float init_r)
{
    kf-&gt;x = init_x; 
    kf-&gt;p = init_p; 

    kf-&gt;q = init_q;
    kf-&gt;r = init_r;
}

/**
 * å¡å°”æ›¼æ»¤æ³¢å™¨æ›´æ–°
*/
float kalman1d_update(kalman_1d_st * kf, float x)
{
    // é¢„æµ‹
    kf-&gt;p = kf-&gt;p + kf-&gt;q;
    // æ›´æ–°
    float K = kf-&gt;p / (kf-&gt;p + kf-&gt;r);  // å¢ç›Š
    kf-&gt;x = kf-&gt;x + K * (x - kf-&gt;x);    // çŠ¶æ€æ›´æ–°
    kf-&gt;p = (1.0f - K) * kf-&gt;p;            // åæ–¹å·®æ›´æ–°

    return kf-&gt;x;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;ç»“è¯­&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸Šæ˜¯ä¸€äº›åŸºç¡€çš„å¹³æ»‘æ»¤æ³¢ç®—æ³•ï¼ŒæŒæ¡å…¶æ€æƒ³ï¼Œåœ¨ç¨‹åºä¸Šæ‰èƒ½ä¿è¯é‡‡é›†æ•°æ®çš„ç¨³å®šã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡éAIåˆ›ä½œï¼Œå¦‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚&lt;/p&gt;
&lt;p&gt;â€&lt;/p&gt;</content:encoded><h:img src="/_astro/2512-McuSimpleFilter-banner.B2ah4KWp.jpg"/><enclosure url="/_astro/2512-McuSimpleFilter-banner.B2ah4KWp.jpg"/></item><item><title>TLSåè®®æµç¨‹è§£æ</title><link>https://poetrycld.com/blog/2025/2512-tlsprocessanalysismd</link><guid isPermaLink="true">https://poetrycld.com/blog/2025/2512-tlsprocessanalysismd</guid><description>ç»†è®²TLSåè®®å»ºç«‹é€šè®¯çš„æ¯ä¸€æ­¥éƒ½åšäº†å•¥ã€‚</description><pubDate>Sat, 06 Dec 2025 22:41:00 GMT</pubDate><content:encoded>&lt;p&gt;TLSå…¨åä¸ºä¼ è¾“å±‚å®‰å…¨åè®®ï¼ˆTransport Layer Securityï¼‰ï¼Œå®ƒæ˜¯SSLæ ‡å‡†åŒ–å‡çº§ç‰ˆæœ¬ï¼Œç°åœ¨æåˆ°çš„SSL/TLSä¸€èˆ¬é»˜è®¤ä¸ºTLSåè®®ï¼Œåè®®è¿‡ç¨‹ä¸­ä½¿ç”¨çš„è¯ä¹¦æ˜¯ä¸SSLåŒç±»çš„æ•°å­—è¯ä¹¦ï¼ˆX.509æ•°å­—è¯ä¹¦ï¼‰ã€‚&lt;/p&gt;
&lt;h2&gt;SSLå’ŒTLSå·®åˆ«&lt;/h2&gt;
&lt;p&gt;SSLç”±äºæ¡æ‰‹è¿‡ç¨‹ç›¸å¯¹ç®€å•ï¼ŒåŒæ—¶SSLçš„è¯ä¹¦é€šå¸¸ä½¿ç”¨è‡ªç­¾åè¯ä¹¦æˆ–è€…å·²çŸ¥çš„å¯†é’¥ï¼Œè¯ä¹¦çš„ç®¡ç†ä¹Ÿæ¯”è¾ƒæ¾æ•£ï¼ŒåŠ å¯†ç®—æ³•ä¾èµ–æ—§çš„åŠ å¯†ç®—æ³•ã€‚&lt;/p&gt;
&lt;p&gt;éšç€è®¡ç®—æœºç®—åŠ›çš„å¢å¼ºï¼Œæ—§çš„åŠ å¯†ç®—æ³•å·²ç»èƒ½è¢«è®¡ç®—æœºçŸ­æ—¶é—´å†…æš´åŠ›ç ´è§£ï¼Œæ‰€ä»¥å»é™¤å½“å‰ä¸å®‰å…¨çš„åŠ å¯†ç®—æ³•ä»¥åŠä½¿ç”¨è§„èŒƒæµç¨‹çš„å‡çº§ç®—æ³•TLSå‡ºç°äº†ï¼ŒSSL1.0è¿­ä»£åˆ°SSL3.0åå°±åœæ­¢æ›´æ–°ï¼Œåˆ‡æ¢ä¸ºäº†TLS1.0ã€‚&lt;/p&gt;
&lt;p&gt;å¼ºåˆ¶ä½¿ç”¨æ›´å®‰å…¨çš„ç®—æ³•ï¼Œè¿™é‡Œå®‰å…¨çš„é‡ç‚¹æ˜¯å¯†ç çš„é•¿åº¦ğŸ˜ï¼Œè®²ç©¶æ˜¯ä¸€å¤§åŠ›å‡ºå¥‡è¿¹ã€‚&lt;/p&gt;
&lt;p&gt;æ—©æœŸæ¯”å¦‚DESå¯†é’¥é•¿åº¦56ä½ï¼Œå¦‚æœæš´åŠ›ç ´è§£æœ€é•¿è¦256æ¬¡å°è¯•ï¼Œç°ä»£è®¡ç®—æœºåˆ†åˆ†é’Ÿå°±ç ´è§£äº†ï¼›è€Œç°åœ¨æ¯”å¦‚AES-256å¯†é’¥é•¿åº¦è¾¾256ä½ï¼Œæš´åŠ›ç ´è§£è¦2256æ¬¡å°è¯•ï¼Œæˆªè‡³25å¹´è¿˜æœªæœ‰èƒ½ç›´æ¥ç ´è§£ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºè¯ä¹¦çš„ç®¡ç†æ›´ä¸ºä¸¥æ ¼ï¼Œæ‰€æœ‰è¯ä¹¦å¿…é¡»è¦ç»è¿‡CAï¼ˆè¯ä¹¦çš„æƒå¨è®¤è¯æœºæ„ï¼‰ï¼Œåœ¨éªŒè¯è¯ä¹¦æ—¶ç›´æ¥CAæœºæ„è®¤è¯æ›´ä¸ºé€æ˜ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°è¿™é‡Œå°ä¼™ä¼´å‘é—®äº†ï¼šâ€œå’‹ä¸ç›´æ¥å‘½åSSL 4.0æï¼Ÿâ€ï¼Œå½“æ—¶SSL2.0ã€SSL3.0ç”±äºå¼±åŠ å¯†ç®—æ³•è¿˜æœ‰å…¶å®ƒå®‰å…¨æœºåˆ¶çš„ç¼ºé™·ï¼Œå®¹æ˜“å—åˆ°ä¸­é—´äººæ”»å‡»è¢«ä½¿ç”¨çš„ç”¨æˆ·è´¨ç–‘å…¶å®‰å…¨æ€§ï¼Œæ‰€ä»¥å¤§åˆ€é˜”æ–§çš„æ ‡å‡†åŒ–äº†æµç¨‹å’Œå¢å¼ºäº†åŠ å¯†ç®—æ³•ï¼Œå¹¶ä¸”é¿å¼€äº†åå£°å—æŸçš„SSLåï¼Œé‡å¼€äº†TLSä»¥è¡¨å†³å¿ƒã€‚&lt;/p&gt;
&lt;h2&gt;ä¸ºä»€ä¹ˆè¦ä½¿ç”¨TLS/SSLåè®®&lt;/h2&gt;
&lt;p&gt;æ—©æœŸäº’è”ç½‘ä¸Šä¼ è¾“ä¿¡æ¯æ˜¯ç›´æ¥æ˜æ–‡å‘é€ä¿¡æ¯ï¼Œé€šè¿‡å¯¹æ–¹è”ç½‘çš„IPåœ°å€å‘é€åˆ°æŒ‡å®šçš„ç”µè„‘ä¸­ï¼Œè¿™æ ·çš„é£é™©æ˜¯åªè¦æœ‰ä¸ªä¸­é—´äººå†’åé¡¶æ›¿äº†æ¥æ”¶è€…çš„IPåœ°å€ï¼Œæˆ–è€…æ›´æœ´ç´ çš„æ˜¯ç›‘å¬äº†è¿™äººç½‘çº¿å‘å‡ºæ¥çš„æ¶ˆæ¯ï¼Œé‚£é€šè¯å†…å®¹å°±è¢«æ‰’å…‰äº†ï¼Œç”šè‡³æ”»å‡»äººå¯ä»¥è™šæ‹Ÿä½ çš„IPåœ°å€å‘å…¶ä»–äººå‘é€ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥è¿™å¥—åè®®ä¸»è¦æ˜¯åœ¨å»ºç«‹é€šè®¯ä¹‹å‰ä½¿ç”¨å®‰å…¨çš„æ–¹å¼ï¼Œç›¸äº’éªŒè¯èº«ä»½ä»¥åŠæ²Ÿé€šå¥½åŠ å¯†å¯†é’¥ï¼Œè¿›è¡ŒåŠ å¯†é€šè¯ï¼Œé˜²æ­¢ç¬¬ä¸‰äººå†’åé¡¶æ›¿æˆ–çªƒå¬é€šè¯å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹å‰webç½‘é¡µä¸€èˆ¬éƒ½æ˜¯ &lt;code&gt;HTTP://.......&lt;/code&gt; è¿™æ ·çš„ç½‘å€ï¼Œæ ‡å¿—ç€å®ƒæ˜¯æœ€ä¸ºåŸå§‹çš„æ˜æ–‡httpåè®®ï¼Œæ¯”å¦‚ä¸Šç½‘æ·˜å®è´­ç‰©ï¼Œä»˜æ¬¾æ—¶çš„è´¦å·å¯†ç éƒ½æ˜¯æ˜æ–‡åœ¨äº’è”ç½‘ä¸­ä¼ è¾“ï¼Œæœ‰å¿ƒäººèƒ½è½»è€Œæ˜“ä¸¾çš„æ•è·ä¿¡æ¯å¹¶è·å–è´¦å·å¯†ç ï¼Œå®åœ¨å±é™©ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨çš„äº’è”ç½‘ç¯å¢ƒå¼€å§‹å¼ºåˆ¶ä½¿ç”¨HTTPSåè®®ï¼Œåé¢è¿™ä¸ªSæŒ‡ä»£æœ€åˆçš„SSLä¼ è¾“åè®®ï¼Œç°åœ¨åŸºæœ¬ä¸ºTLSåè®®ï¼Œä¸ºçš„å°±æ˜¯åœ¨å»ºç«‹é€šè®¯çš„æ—¶å€™äº’ç›¸ä¸¥æ˜é€šè®¯åŒæ–¹çš„èº«ä»½æ˜¯å¦æ­£å¸¸ï¼Œç„¶åå•†é‡åŠ å¯†çš„æ–¹å¼æ˜¯ä»€ä¹ˆåï¼Œå¼€å¯åŠ å¯†é€šè®¯ï¼Œè¿™æ ·å³ä½¿æœ‰å¿ƒäººæ•æ‰åˆ°äº†ä¿¡æ¯ä¹Ÿæ— æ³•è§£å¯†é€šè®¯å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨éœ€è¦ä½¿ç”¨çš„åœºæ™¯æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Webå®‰å…¨ï¼ˆHTTPSï¼‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æµè§ˆå™¨ä¸ç½‘ç«™æœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®ä¼ è¾“ï¼ˆå¦‚ç™»å½•ã€æ”¯ä»˜ã€ä¸ªäººä¿¡æ¯æäº¤ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”µå­é‚®ä»¶å®‰å…¨ï¼ˆSMTP/IMAP/POP3 over TLSï¼‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é‚®ä»¶å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å³æ—¶é€šè®¯ï¼ˆIMï¼‰ä¸APIé€šä¿¡&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¾®ä¿¡ã€WhatsAppç­‰èŠå¤©åº”ç”¨ï¼Œæˆ–APPä¸æœåŠ¡å™¨é—´çš„APIè°ƒç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç‰©è”ç½‘ï¼ˆIoTï¼‰è®¾å¤‡å®‰å…¨&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ™ºèƒ½è®¾å¤‡ï¼ˆå¦‚æ‘„åƒå¤´ã€ä¼ æ„Ÿå™¨ï¼‰ä¸äº‘ç«¯æœåŠ¡å™¨çš„é€šä¿¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ–‡ä»¶ä¼ è¾“ï¼ˆFTP/SFTPï¼‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é€šè¿‡FTPæˆ–SFTPåè®®ä¸Šä¼ /ä¸‹è½½æ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;ä¸€ç‚¹ç‚¹ä¿¡æ¯è¡¥å……&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;HTTP é»˜è®¤ç«¯å£ï¼š80ã€‚	HTTPS é»˜è®¤ç«¯å£ï¼š443ã€‚&lt;/p&gt;
&lt;p&gt;SSL è¯ä¹¦ç›¸å½“äºé©¾é©¶è¯ï¼Œæ˜¯ä¿å­˜åœ¨æºæœåŠ¡å™¨çš„æ•°æ®æ–‡ä»¶ã€‚éœ€è¦å‘ CA è¯ä¹¦æˆæƒä¸­å¿ƒç”³è¯·è¯ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;è¯ä¹¦å¯ä»¥è¡¨æ˜ï¼šï¼ˆç”¨æˆ·å®‰è£…äº† SSL è¯ä¹¦ä¹‹åå°±å¯ä»¥é€šè¿‡ HTTPS è®¿é—®æœåŠ¡å™¨ï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸŸåå±äºè°&lt;/li&gt;
&lt;li&gt;ç”³è¯·æ—¥æœŸ&lt;/li&gt;
&lt;li&gt;å…¶ä»–ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¬é’¥&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç§é’¥&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;TLS æ˜¯ SSL çš„åç»­ç‰ˆæœ¬ï¼Œæ˜¯ä¸€ç§å¯¹æ•°æ®åŠ å¯†çš„æ¡†æ¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;./assets/image-20240226140637-1ot4qt6.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç§é’¥åŠ å¯†çš„æ–‡ä»¶åªèƒ½ç”¨å…¬é’¥è§£å¼€ï¼Œå…¬é’¥åŠ å¯†çš„æ–‡ä»¶åªèƒ½ç”¨ç§é’¥è§£å¼€ã€‚&lt;/p&gt;
&lt;p&gt;TLS1.2 ä¸­ä½¿ç”¨çš„ä¸¤ç§åŠ å¯†å½¢å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;RSAï¼ˆéå¯¹ç§°åŠ å¯†ç®—æ³•ï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœåŠ¡å™¨æœ‰è‡ªå·±å›ºå®šæ˜¯ç§é’¥å’Œå…¬é’¥ã€‚æŠŠå…¬é’¥æ•£æ’­å‡ºå»ï¼Œè¦å’ŒæœåŠ¡ç«¯é€šä¿¡éœ€è¦é€šè¿‡å…¬é’¥åŠ å¯†éšæœºæ•°ç”Ÿæˆé¢„ä¸»å¯†é’¥å‘ç»™æœåŠ¡ç«¯ï¼Œåœ¨é€šè¿‡é¢„ä¸»å¯†é’¥è®¡ç®—ç”Ÿæˆä¼šè¯å¯†é’¥ï¼Œä»¥æ­¤è¿›è¡Œæœ¬æ¬¡çš„æ•°æ®åŠ å¯†æ²Ÿé€šã€‚&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼šä¸€æ—¦ç§é’¥è¢«ç ´è§£äº†ï¼Œä¹‹å‰æ‰€æœ‰çš„æ•°æ®é€šä¿¡éƒ½å°†è¢«è§£å¯†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DHï¼ˆæœåŠ¡ç«¯æœ‰è‡ªå·±å›ºå®šçš„å…¬é’¥å’Œç§é’¥ï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯è¯·æ±‚è¿æ¥çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯æŠŠè‡ªå·±å›ºå®šå…¬é’¥å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿç”Ÿæˆä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼Œåœ¨æŠŠè‡ªå·±çš„å…¬é’¥å‘é€ç»™æœåŠ¡ç«¯ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒä»¬è¿æ¥çš„å¯¹ç§°å¯†é’¥æ˜¯ä½¿ç”¨è‡ªå·±å¯†é’¥å’Œå¯¹æ–¹å‘é€çš„å…¬é’¥åŸºäºå…¬å¼€çš„ç®—æ³•ç®—å‡ºä¸€ä¸ªå¯†é’¥ã€‚åŒæ–¹ç®—å‡ºçš„å¯†é’¥éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å¯ä»¥ä½œä¸ºåç»­é€šä¿¡åŠ å¯†ä½¿ç”¨å¯¹ç§°åŠ å¯†å¯†é’¥ã€‚&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼šç”±äºæœåŠ¡ç«¯çš„å…¬é’¥æ˜¯å›ºå®šçš„ï¼Œåªæœ‰å®¢æˆ·ç«¯çš„å…¬é’¥æ˜¯ä¸´æ—¶éšæœºç”Ÿæˆå‘ï¼Œè¢«ç ´è§£çš„å¯èƒ½æ€§ä¹Ÿæ¯”è¾ƒå¤§ï¼ˆTLS1.3 åºŸå¼ƒäº†ï¼Œä½¿ç”¨äº† DHE ç®—æ³•ï¼ŒåŒæ–¹æ¯æ¬¡é€šä¿¡çš„å…¬é’¥å’Œç§é’¥éƒ½æ˜¯éšæœºç”Ÿæˆçš„ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;TLS1.2 çš„ RSA æ¡æ‰‹è¿‡ç¨‹&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨åŸå…ˆçš„ TCP3 æ¬¡æ¡æ‰‹ä¸Šè¿›è¡Œæ”¹è¿›ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;./assets/image-20240226131347-mf76u5w.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;./assets/image-20240226134702-qwaxfmb.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¼€å§‹è§£ææ¡æ‰‹è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;p&gt;â€‹&lt;code&gt;å®¢æˆ·ç«¯&lt;/code&gt;â€‹ â€‹1 å’Œ &lt;code&gt;æœåŠ¡ç«¯&lt;/code&gt;â€‹ â€‹2 æ­¥éª¤æ˜¯ç”¨æ¥å¯¹ç…§åŒæ–¹ä½¿ç”¨çš„ç‰ˆæœ¬å·å’Œä½¿ç”¨çš„å¯†ç å¥—ä»¶ä»¥åŠå‹ç¼©æ–¹å¼ï¼Œå¹¶å„è‡ªç”Ÿæˆäº†ä¸€ä¸ªéšæœºæ•°å‘é€ç»™å¯¹æ–¹ï¼Œåˆ†åˆ«ä¸º&lt;strong&gt;éšæœºæ•°ä¸€&lt;/strong&gt;ã€&lt;strong&gt;éšæœºæ•°äºŒ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»¥ä¸Šç›¸äº’å£°æ˜å®Œæ¯•åï¼ŒæœåŠ¡ç«¯å…ˆå‘é€è¯·æ±‚ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;â€‹&lt;code&gt;æœåŠ¡ç«¯&lt;/code&gt; â€‹æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‡ºç¤ºè‡ªå·±çš„è¯ä¹¦ï¼Œè®©å®¢æˆ·ç«¯å¯¹ç…§è‡ªå·±çš„è¯ä¹¦ä¿¡ä»»åˆ—è¡¨ç±»ç¡®è®¤è¿™ä¸ªæœåŠ¡å™¨æ˜¯å¦å¯é ã€‚&lt;/li&gt;
&lt;li&gt;â€‹&lt;code&gt;æœåŠ¡ç«¯&lt;/code&gt; â€‹ServerKeyExchange è¿™ä¸€æ­¥æœåŠ¡å™¨æŠŠè‡ªå·±å…¬é’¥å‘é€ç»™äº†å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;li&gt;â€‹&lt;code&gt;æœåŠ¡ç«¯&lt;/code&gt; â€‹å¦‚æœæœåŠ¡ç«¯ä¹Ÿè¦å®¢æˆ·ç«¯çš„è¯ä¹¦ï¼Œä¼šå‘é€ CertificateRequest è¯·æ±‚åŒ…ã€‚æ¯”å¦‚ç™»å…¥ç½‘é“¶å°±è¦è¿™ä¸ªæ­¥éª¤äº†ï¼Œå¯çœç•¥ã€‚&lt;/li&gt;
&lt;li&gt;â€‹&lt;code&gt;æœåŠ¡ç«¯&lt;/code&gt; â€‹æœ€åè¿˜è¦å‘é€ä¸€ä¸ª ServerHelloDone åŒ…è¡¨ç¤ºç»“æŸ&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¥ä¸‹æ¥å®¢æˆ·ç«¯è¿›è¡Œå“åº”ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&quot;7&quot;&gt;
&lt;li&gt;â€‹&lt;code&gt;å®¢æˆ·ç«¯&lt;/code&gt; â€‹Certificate åŒ…ï¼Œå½“æœåŠ¡ç«¯æ‰§è¡Œäº†è¿æ¥çš„ç¬¬äº”æ­¥ï¼Œå‘é€äº† CertificateRequest è¯·æ±‚åŒ…ï¼Œå®¢æˆ·ç«¯å°±è¦åœ¨æ­¤æ—¶åé¦ˆè‡ªå·±çš„å®¢æˆ·ç«¯ SSL è¯ä¹¦ã€‚&lt;/li&gt;
&lt;li&gt;â€‹&lt;code&gt;å®¢æˆ·ç«¯&lt;/code&gt;â€‹ â€‹ClientKeyExchange åŒ…ï¼Œç”Ÿæˆä¸€ç»„éšæœºæ•°ï¼Œåœ¨é€šè¿‡ä¼šæœåŠ¡å™¨å‘é€çš„å…¬é’¥è¿›è¡ŒåŠ å¯†å‘é€ç»™æœåŠ¡å™¨ï¼Œç§°ä¸ºé¢„å¤‡ä¸»å¯†ç ï¼ˆæœåŠ¡ç«¯ä½¿ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ï¼Œå¾—åˆ°é¢„å¤‡ä¸»å¯†ç ï¼‰ï¼Œè¿™æ˜¯&lt;strong&gt;ç¬¬ä¸‰ä¸ªéšæœºæ•°&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;â€‹&lt;code&gt;å®¢æˆ·ç«¯&lt;/code&gt; â€‹å‘é€æ•°å­—ç­¾åï¼Œè¯æ˜è‡ªå·±æ˜¯è¯ä¹¦çš„æŒæœ‰è€…ã€‚&lt;/li&gt;
&lt;li&gt;â€‹&lt;code&gt;å®¢æˆ·ç«¯&lt;/code&gt; â€‹å‘Šè¯‰æœåŠ¡å™¨å¾€åçš„æ•°æ®å°±ç”¨å•†è®®å¥½çš„ç®—æ³•å’Œå¯†é’¥æ¥åŠ å¯†ï¼Œå‡†å¤‡åˆ‡æ¢åŠ å¯†é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;â€‹&lt;code&gt;å®¢æˆ·ç«¯&lt;/code&gt; â€‹å‘é€ EncryptedHandshakeMessage åŒ…ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯åŠ å¯†å¼€å§‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;æœåŠ¡ç«¯ä¹Ÿå¼€å§‹å›åº”ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&quot;12&quot;&gt;
&lt;li&gt;â€‹&lt;code&gt;æœåŠ¡ç«¯&lt;/code&gt; â€‹å‘Šè¯‰å®¢æˆ·ç«¯å¾€åçš„æ•°æ®å°±ç”¨å•†è®®å¥½çš„ç®—æ³•å’Œå¯†é’¥æ¥åŠ å¯†ï¼Œå‡†å¤‡åˆ‡æ¢åŠ å¯†é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;â€‹&lt;code&gt;æœåŠ¡ç«¯&lt;/code&gt; â€‹å‘é€ EncryptedHandshakeMessage åŒ…ï¼Œè¡¨ç¤ºæœåŠ¡ç«¯åŠ å¯†å¼€å§‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;â˜… åˆ°æ­¤ï¼Œæ¡æ‰‹è¿‡ç¨‹ç»“æŸï¼Œä»ç°åœ¨å¼€å§‹çš„æ•°æ®éƒ½æ˜¯&lt;strong&gt;é€šè¿‡åŠ å¯†&lt;/strong&gt;è¿›è¡Œé€šä¿¡çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¥ä¸‹æ¥ç”¨æ¥åŠ å¯†æ•°æ®çš„å¯†é’¥ä¸ºï¼š&lt;code&gt;éšæœºæ•°ä¸€ + éšæœºæ•°äºŒ + éšæœºæ•°3ï¼ˆé¢„å¤‡ä¸»å¯†é’¥ï¼‰= ä¼šè¯å¯†é’¥&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„é¢„å¤‡ä¸»å¯†é’¥åªæœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çŸ¥é“ï¼Œè€Œä¸”æ¯æ¬¡å»ºç«‹é€šè®¯éƒ½ä¼šé‡æ–°ç”Ÿæˆéšæœºæ•°è®¡ç®—å‡ºä¼šè¯å¯†é’¥ï¼Œå®‰å…¨æ€§ä¼šå¤§å¤§å¢å¼ºã€‚åé¢éƒ½æ˜¯ç”¨å¯¹ç§°æ€§åŠ å¯†è¿›è¡Œé€šè®¯äº†ã€‚&lt;/p&gt;
&lt;h2&gt;å‚è€ƒ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1KY411x7Jp/?spm_id_from=333.788&amp;#x26;vd_source=58197a5b8611da761d73750a6086f2fd&quot;&gt;HTTPS æ˜¯ä»€ä¹ˆï¼ŸåŠ å¯†åŸç†å’Œè¯ä¹¦ã€‚SSL/TLS æ¡æ‰‹è¿‡ç¨‹_å“”å“©å“”å“©_bilibili&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/133375078&quot;&gt;ä¸€ç¯‡æ–‡ç« è®©ä½ å½»åº•å¼„æ‡‚SSL/TLSåè®®&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;â€&lt;/p&gt;</content:encoded><h:img src="/_astro/2512-TlsProcessAnalysis-banner.CFT4PDjw.jpg"/><enclosure url="/_astro/2512-TlsProcessAnalysis-banner.CFT4PDjw.jpg"/></item><item><title>MQTTåè®®å…¨é¢è§£æ</title><link>https://poetrycld.com/blog/2025/2511-mqttprotocolanalysis</link><guid isPermaLink="true">https://poetrycld.com/blog/2025/2511-mqttprotocolanalysis</guid><description>æ’•å¼€MQTTåè®®åº•è£¤ï¼Œåˆ†æåè®®çš„æ¯ bit çš„æ„ä¹‰ã€‚</description><pubDate>Thu, 27 Nov 2025 23:30:00 GMT</pubDate><content:encoded>&lt;p&gt;æ·±åº¦æŒ–æ˜ä¸€ä¸‹ MQTTã€‚
ä¸­æ–‡æ–‡æ¡£ï¼š&lt;a href=&quot;https://mcxiaoke.gitbooks.io/mqtt-cn/content/&quot;&gt;https://mcxiaoke.gitbooks.io/mqtt-cn/content/&lt;/a&gt;
CSDNï¼š&lt;a href=&quot;https://blog.csdn.net/qq_39785798/article/details/80765716&quot;&gt;https://blog.csdn.net/qq_39785798/article/details/80765716&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“åè®®ï¼Œæ˜¯åŸºäºå‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„â€œè½»é‡çº§â€é€šè®¯åè®®ï¼Œè¯¥åè®®æ„å»ºä¸ TCP/IPã€‚
ä¼˜ç‚¹ï¼šå¯ä»¥ä»¥æå°‘çš„ä»£ç å’Œæœ‰é™çš„å¸¦å®½ï¼Œä¸ºè¿æ¥è¿œç¨‹è®¾å¤‡æä¾›å®æ—¶å¯é çš„æ¶ˆæ¯ã€‚ä½œä¸ºä¸€ç§ä½å¼€é”€ã€ä½å¸¦å®½å ç”¨çš„å³æ—¶é€šè®¯åè®®ï¼Œä¸»è¦åœ¨ç‰©è”ç½‘ã€å°å‹è®¾å¤‡ã€ç§»åŠ¨è®¾å¤‡ä¸Šåº”ç”¨ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ ¹æ®ä¸­æ–‡æ–‡æ¡£åè®®è¯´æ˜ï¼Œé€šè¿‡ AT é€ä¼ æŠŠç›¸å¯¹åº”åè®®å‘½ä»¤è½¬åŒ–ä¸º ASCII ç /16 è¿›åˆ¶åœ¨å‘é€ç»™æœåŠ¡ç«¯ã€‚
è¯·æ±‚æ•°æ®åŒ…è§£æï¼š&lt;a href=&quot;https://blog.csdn.net/qq_29933439/article/details/91350987&quot;&gt;https://blog.csdn.net/qq_29933439/article/details/91350987&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;è®¿é—®æµç¨‹&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/jiejiemcu/article/details/106737995&quot;&gt;https://blog.csdn.net/jiejiemcu/article/details/106737995&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é¦–å…ˆ TCP è¿æ¥åˆ°æœåŠ¡å™¨ç«¯å£ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;img src=&quot;./assets/net-img-1691545397623-daa5357f-4a6f-4510-8f3b-c4709ec74900-20231029145727-qr3rlvh.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»¥ä¸‹å‘é€çš„æŠ¥æ–‡å‡ä¸º 16 è¿›åˆ¶ ASCII ç ã€‚&lt;/p&gt;
&lt;h3&gt;MQTT è¿æ¥æœåŠ¡å™¨&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;å®¢æˆ·ç«¯&lt;/code&gt; CONNECT è¿æ¥è¯·æ±‚ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç¬¬ä¸€ä¸ªæŠ¥æ–‡å¿…é¡»æ˜¯ CONNECT æŠ¥æ–‡ï¼Œä¸”åªèƒ½ä¸€æ¬¡ï¼Œå¦åˆ™è¿è§„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;æœåŠ¡ç«¯&lt;/code&gt; CONNACK ç¡®è®¤è¿æ¥è¯·æ±‚ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æœåŠ¡ç«¯è¿”å›çš„åº”ç­”ç ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸­é—´æ˜¯æ­£å¸¸çš„æ•°æ®äº¤äº’ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;å®¢æˆ·ç«¯&lt;/code&gt; PINGREQ å¿ƒè·³è¯·æ±‚ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;éš”ä¸€æ®µæ—¶é—´ï¼ˆ1 åˆ†é’Ÿå·¦å³ï¼‰è¦æœ‰å¿ƒè·³è¯·æ±‚ï¼Œå¦åˆ™æ–­å¼€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;æœåŠ¡ç«¯&lt;/code&gt; PINGRESP å¿ƒè·³å“åº”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;./assets/net-img-1691545659877-c6d8cec0-340e-43ad-a4b0-67bef59bfc02-20231029145727-buhxx9k.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;h3&gt;MQTT è®¢é˜…ä¸»é¢˜&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;è®¢é˜…è€…&lt;/code&gt; SUBSCRIBE è®¢é˜…ä¸»é¢˜ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ç”¨äºåˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªè®¢é˜…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ”¯æŒé€šé…ç¬¦ï¼ŒæŒ‡å®šäº†æœ€å¤§ QoS ç­‰çº§ï¼Œæœ‰å›ºå®šã€å¯å˜æŠ¥å¤´å’Œæœ‰æ•ˆè½½è·ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¿™é‡Œçš„æœ‰æ•ˆè½½è·åŒ…å«äº†ä¸»é¢˜è¿‡æ»¤åˆ—è¡¨ï¼Œæ ‡è¯†å®¢æˆ·ç«¯æƒ³è¦è®¢é˜…çš„ä¸»é¢˜ï¼Œå¿…é¡»æ˜¯ UTF-8 å­—ç¬¦ä¸²ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;æœåŠ¡å™¨&lt;/code&gt; SUBACK è®¢é˜…ç¡®è®¤ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¿…é¡»å’Œç­‰å¾…ç¡®è®¤çš„ SUBSCRIBE æœ‰ç›¸åŒçš„æŠ¥æ–‡æ ‡è¯†ç¬¦ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;å®¢æˆ·ç«¯``æœåŠ¡ç«¯&lt;/code&gt; PINGREQ å¿ƒè·³è¯·æ±‚å’Œ PINGRESP å“åº”ä¸èƒ½æ–­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;./assets/net-img-1691546436311-4c3a2cef-bafb-4d1a-94bd-9bd7e7fddcc9-20231029145727-slz4jga.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;h3&gt;MQTT å‘å¸ƒæ¶ˆæ¯&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;æœåŠ¡è´¨é‡ç­‰çº§ QoS
&lt;img src=&quot;./assets/net-img-1691546778230-eed2d192-57d4-48ca-a2d5-756307bd0031-20231029145727-vcpofwo.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;QoS0 çš„ PUBLISH æ§åˆ¶æŠ¥æ–‡&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;å‘å¸ƒæ¶ˆæ¯æœåŠ¡å™¨ä¸ä¼šå‘é€å“åº”ï¼Œå‘å¸ƒè€…ä¹Ÿä¸ä¼šé‡è¯•ï¼Œå‘å‡ºæ¶ˆæ¯å°±ä¸¢å¼ƒäº†ï¼Œæ‰€ä»¥æ¶ˆæ¯å¯èƒ½æ ¹æœ¬æ²¡åˆ°è¾¾ã€‚
&lt;strong&gt;å‘å¸ƒè€…å¿…é¡»å‘é€ QoS ç­‰äº 0ï¼ŒDUP ç­‰äº 0 çš„ PUBLISH æŠ¥æ–‡ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;PUBLISH	å‘å¸ƒæ¶ˆæ¯ &lt;code&gt;å‘å¸ƒè€…&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;./assets/net-img-1691547146156-35889a66-05a4-4bb0-80de-feecb3d48a8e-20231029145727-60ar2kv.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;h4&gt;QoS1 çš„ PUBLISH æ§åˆ¶æŠ¥æ–‡&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;ç¡®ä¿æ¶ˆæ¯è‡³å°‘é€è¾¾ä¸€æ¬¡ï¼Œç”šè‡³å¯èƒ½è¢«å¤šæ¬¡å¤„ç†ã€‚QoS1 çš„ PUBLISH æŠ¥æ–‡çš„å¯å˜æŠ¥å¤´ä¸­åŒ…å«ä¸€ä¸ªæŠ¥æ–‡æ ‡è¯†ç¬¦ï¼Œéœ€è¦ PUBACK æŠ¥æ–‡ç¡®è®¤ã€‚
æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡åä¸¢å¼ƒæ¶ˆæ¯ã€‚
&lt;strong&gt;å‘å¸ƒè€…å¿…é¡»å‘é€ QoS ç­‰äº 1ï¼ŒDUP ç­‰äº 0 çš„ PUBLISH æŠ¥æ–‡ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;PUBLISH	å‘å¸ƒæ¶ˆæ¯ &lt;code&gt;å‘å¸ƒè€…&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;PUBACK	å‘å¸ƒç¡®è®¤ &lt;code&gt;æœåŠ¡ç«¯&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;./assets/net-img-1691547822026-5c055992-f42e-452b-aa6d-3c89ff789f5c-20231029145727-9tvvm4i.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;h4&gt;QoS2 çš„ PUBLISH æ§åˆ¶æŠ¥æ–‡&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™æ˜¯æœ€é«˜ç­‰çº§çš„æœåŠ¡è´¨é‡ï¼Œæ¶ˆæ¯ä¸¢å¤±å’Œé‡å¤éƒ½æ˜¯ä¸å¯æ¥å—çš„ã€‚ä½¿ç”¨è¿™ä¸ªæœåŠ¡è´¨é‡ç­‰çº§ä¼šæœ‰é¢å¤–çš„å¼€é”€ã€‚
&lt;strong&gt;å‘å¸ƒè€…å¿…é¡»å‘é€ QoS ç­‰äº 2ï¼ŒDUP ç­‰äº 0 çš„ PUBLISH æŠ¥æ–‡ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;PUBLISH		å‘å¸ƒæ¶ˆæ¯ &lt;code&gt;å‘å¸ƒè€…&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;PUBREC		å‘å¸ƒæ”¶åˆ° &lt;code&gt;æœåŠ¡ç«¯&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;PUBREL 		å‘å¸ƒé‡Šæ”¾ &lt;code&gt;å‘å¸ƒè€…&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;PUBCOMP	å‘å¸ƒå®Œæˆ &lt;code&gt;æœåŠ¡ç«¯&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;./assets/net-img-1691547967451-104f0fb7-4d5e-4e8d-bb1e-2ba5c90cbd90-20231029145727-5sd863v.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;h3&gt;å–æ¶ˆè®¢é˜…&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;UNSUBSCRIBE æŠ¥æ–‡å›ºå®šæŠ¥å¤´çš„ç¬¬ 3,2,1,0 ä½æ˜¯ä¿ç•™ä½ä¸”å¿…é¡»åˆ†åˆ«è®¾ç½®ä¸º 0,0,1,0ã€‚å¦åˆ™æœåŠ¡å™¨å¿…é¡»è®¤ä¸ºä»»ä½•å…¶å®ƒçš„å€¼éƒ½æ˜¯ä¸åˆæ³•çš„å¹¶å…³é—­ç½‘ç»œè¿ã€‚å…·ä½“çš„æè¿°å¯ä»¥çœ‹åè®®æ–‡æ¡£ã€‚
UNSUBSCRIBE æŠ¥æ–‡çš„æœ‰æ•ˆè½½è·åŒ…å«å®¢æˆ·ç«¯æƒ³è¦å–æ¶ˆè®¢é˜…çš„ä¸»é¢˜è¿‡æ»¤å™¨åˆ—è¡¨ã€‚UNSUBSCRIBE æŠ¥æ–‡ä¸­çš„ä¸»é¢˜è¿‡æ»¤å™¨å¿…é¡»æ˜¯è¿ç»­æ‰“åŒ…çš„ UTF-8 ç¼–ç å­—ç¬¦ä¸²ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;UNSUBSCRIBE		å–æ¶ˆè®¢é˜…ä¸»é¢˜ &lt;code&gt;è®¢é˜…è€…&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;UNSUBACK		å–æ¶ˆè®¢é˜…ç¡®è®¤ &lt;code&gt;æœåŠ¡å™¨&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;./assets/net-img-1691548269363-a3489452-d419-4e2c-a4a9-54f82973ef3c-20231029145727-1dxkhae.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;h3&gt;æ–­å¼€è¿æ¥&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;DISCONNECT æŠ¥æ–‡æ˜¯å®¢æˆ·ç«¯å‘ç»™æœåŠ¡ç«¯çš„æœ€åä¸€ä¸ªæ§åˆ¶æŠ¥æ–‡ã€‚è¡¨ç¤ºå®¢æˆ·ç«¯æ­£å¸¸æ–­å¼€è¿æ¥ã€‚
DISCONNECT æŠ¥æ–‡çš„å›ºå®šæŠ¥å¤´ä¿ç•™ä½å¿…é¡»å…¨ä¸º 0ã€‚
å®¢æˆ·ç«¯å‘é€ DISCONNECT æŠ¥æ–‡ä¹‹åå¿…é¡»å…³é—­ç½‘ç»œè¿æ¥ï¼Œä¸èƒ½é€šè¿‡é‚£ä¸ªç½‘ç»œè¿æ¥å†å‘é€ä»»ä½•æ§åˆ¶æŠ¥æ–‡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;è®¢é˜…è€…&lt;/code&gt; DISCONNECT		æ–­å¼€è¿æ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;æŠ¥æ–‡æ¡ˆä¾‹&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™é‡ŒæŒ‰ç…§æ•°æ®æŠ¥æ–‡çš„è§„å®šï¼Œç»™äº†æ¯ä¸ªæŠ¥æ–‡çš„ä¾‹å­ã€‚
å½“ç„¶å®é™…ä½¿ç”¨è¦è½¬åŒ–ä¸º ASCII çš„åå…­è¿›åˆ¶ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;CONNECT-è¿æ¥æœåŠ¡ç«¯&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;10 + å‰©ä½™çš„é•¿åº¦ + 00 04(åè®®åé•¿åº¦) + 4d 51 54 54(MQTT) + 04(åè®®ç‰ˆæœ¬) + è¿æ¥æ ‡å¿— + 00 3c(å¿ƒè·³é—´éš”) + å®¢æˆ·ç«¯ ID é•¿åº¦ 2 å­—èŠ‚ + å®¢æˆ·ç«¯ ID + ç”¨æˆ·åé•¿åº¦ 2 å­—èŠ‚ + ç”¨æˆ·å + å¯†ç é•¿åº¦ 2 å­—èŠ‚ + å¯†ç &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™é‡Œæœ‰æ•ˆè½½è·é¡ºåºå¿…é¡»æ˜¯ï¼šå®¢æˆ·ç«¯æ ‡è¯†ç¬¦ï¼Œé—å˜±ä¸»é¢˜ï¼Œé—å˜±æ¶ˆæ¯ï¼Œç”¨æˆ·åï¼Œå¯†ç ã€‚
è½½è·çš„ä¸œè¥¿å°±æ ¹æ®è¿æ¥æ ‡å¿—é‡Œé¢ 1 å®šä¹‰ï¼Œæ¯”å¦‚ä¸Šé¢çš„ä¾‹å­æ˜¯åœ¨è¿æ¥æ ‡å¿—é‡Œé¢å®šä¹‰äº†ç”¨æˆ·åå’Œå¯†ç ã€‚
å‰©ä½™é•¿åº¦å­—æ®µä½¿ç”¨ä¸€ä¸ªå˜é•¿åº¦ç¼–ç æ–¹æ¡ˆï¼Œå¯¹å°äº 128 çš„å€¼å®ƒä½¿ç”¨å•å­—èŠ‚ç¼–ç ã€‚æ›´å¤§çš„å€¼æŒ‰ä¸‹é¢çš„æ–¹å¼å¤„ç†ã€‚ä½ 7 ä½æœ‰æ•ˆä½ç”¨äºç¼–ç æ•°æ®ï¼Œæœ€é«˜æœ‰æ•ˆä½ç”¨äºæŒ‡ç¤ºæ˜¯å¦æœ‰æ›´å¤šçš„å­—èŠ‚ã€‚å› æ­¤æ¯ä¸ªå­—èŠ‚å¯ä»¥ç¼–ç  128 ä¸ªæ•°å€¼å’Œä¸€ä¸ª_å»¶ç»­ä½ï¼ˆcontinuation bitï¼‰_ã€‚å‰©ä½™é•¿åº¦å­—æ®µæœ€å¤§ 4 ä¸ªå­—èŠ‚ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/Mark_md/article/details/108196317&quot;&gt;https://blog.csdn.net/Mark_md/article/details/108196317&lt;/a&gt;
è¿™ä¸ªè®¡ç®—æ˜¯è¦æœ‰ç‚¹é—¨é“ã€‚
å¤§æ¦‚å°±æ˜¯æŠŠæ•°å€¼è½¬åŒ–ä¸ºäºŒè¿›åˆ¶ï¼Œåœ¨è¿›è¡Œæ‹†åˆ†å¡«å…¥
&lt;img src=&quot;./assets/net-img-1691656288102-3bad4ddc-b4ea-459a-98b7-2a50847adebd-20231029145727-hewkwk3.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;./assets/net-img-1691650760371-5e8df062-c4e0-46f6-8d2a-e1616e253be2-20231029145727-bwdif9c.png&quot; alt=&quot;image.png&quot;&gt;
&lt;img src=&quot;./assets/net-img-1691655817329-4de30835-4609-4445-8ef0-71478e591d04-20231029145727-1paksoy.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;h3&gt;PINGREQ-å¿ƒè·³è¯·æ±‚&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å›ºå®šæŠ¥æ–‡:    C0 00&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™ä¸ªè¦åœ¨ CONNECT è§„å®šçš„ä¿æŒè¿æ¥ Keep Alive çš„ç§’æ•°ä¹‹å†…å‘é€å¿ƒè·³å°±è¡Œã€‚&lt;/p&gt;
&lt;h3&gt;DISCONNECT-æ–­å¼€è¿æ¥&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å›ºå®šæŠ¥æ–‡ï¼šE0 00&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;SUBSCRIBE_è®¢é˜…ä¸»é¢˜&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;82(å›ºå®šæŠ¥å¤´) + å‰©ä½™é•¿åº¦ + å¯å˜æŠ¥å¤´ 2 å­—èŠ‚(ç›¸å½“äºç”¨æˆ· IDï¼Œè‡ªå®šä¹‰) + Topic é•¿åº¦ä¸¤å­—èŠ‚ + Topic + æœåŠ¡ç­‰çº§(0-&gt;00ï¼Œ1-&gt;01)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å‰©ä½™é•¿åº¦ = å¯å˜ + è´Ÿè½½ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯å˜æŠ¥å¤´å»ºè®®é¡ºåºå¢åŠ ä» 0001 åˆ° ffffã€‚
è¿™ä¸ªæ˜¯å…³é”®ï¼Œç›¸å½“äºè®¢é˜…è®¾å¤‡è‡ªå·±çš„ IDï¼Œä¸è¦é‡å¤ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;UNSUBSCRIBE_å–æ¶ˆè®¢é˜…&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;A2(å›ºå®šæŠ¥å¤´) + å‰©ä½™é•¿åº¦ + å¯å˜æŠ¥å¤´ 2 å­—èŠ‚(ç›¸å½“äºç”¨æˆ· IDï¼Œè‡ªå®šä¹‰) + Topic é•¿åº¦ä¸¤å­—èŠ‚ + Topic&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å’Œè®¢é˜…ä¸»é¢˜å°±å·®åˆ«åœ¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å›ºå®šæŠ¥å¤´æ”¹äº†æŠ¥æ–‡ç±»å‹&lt;/li&gt;
&lt;li&gt;ç»“å°¾æ²¡æœ‰æœåŠ¡ç­‰çº§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;PUBLISH_æ•°æ®ä¸ŠæŠ¥&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;30(MQTT æŠ¥æ–‡ç±»å‹ +DUP+QoS-H+QoS-+RETAIN) + å‰©ä½™é•¿åº¦ + å‘å¸ƒçš„ Topic åå­—é•¿åº¦ä¸¤å­—èŠ‚ + å‘å¸ƒ Topic + è½½è·æ•°æ®
ä¸Šé¢çš„ 30 ä¸­ QoS ç­‰çº§ä¸º 0ï¼Œç­‰çº§ä¸º 1 æ˜¯ 32&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¾‹å­ï¼šç”¨é˜¿é‡Œäº‘åœ¨çº¿è°ƒè¯•å‘å¸ƒçš„æ¶ˆæ¯ï¼Œå¾ˆéšä¾¿
30 9D 01 00 33 2F 73 79 73 2F 61 31 79 79 65 71 67 70 73 4B 6D 2F 6D 71 74 74 5F 66 78 2F 74 68 69 6E 67 2F 73 65 72 76 69 63 65 2F 70 72 6F 70 65 72 74 79 2F 73 65 74 7B 22 6D 65 74 68 6F 64 22 3A 22 74 68 69 6E 67 2E 73 65 72 76 69 63 65 2E 70 72 6F 70 65 72 74 79 2E 73 65 74 22 2C 22 69 64 22 3A 22 33 34 34 34 36 31 37 31 22 2C 22 70 61 72 61 6D 73 22 3A 7B 22 74 65 6D 70 22 3A 38 38 2C 22 68 75 6D 69 22 3A 37 37 7D 2C 22 76 65 72 73 69 6F 6E 22 3A 22 31 2E 30 2E 30 22 7D
ä¾‹å­å»æ‰å‰é¢çš„ 30 9D 01 00 33 çš„æ•°æ®ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;/sys/a1yyeqgpsKm/mqtt_fx/thing/service/property/set{&quot;method&quot;:&quot;thing.service.property.set&quot;,&quot;id&quot;:&quot;34446171&quot;,&quot;params&quot;:{&quot;temp&quot;:88,&quot;humi&quot;:77},&quot;version&quot;:&quot;1.0.0&quot;}&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯é’ˆå¯¹é˜¿é‡Œäº‘ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¦æœ‰è¯·æ±‚æ–¹æ³•	method + Topic&lt;/li&gt;
&lt;li&gt;è®¾å¤‡å”¯ä¸€æ ‡è¯†	id + è‡ªå®šä¹‰ ID&lt;/li&gt;
&lt;li&gt;ä¸šåŠ¡å±æ€§å‚æ•°	å±æ€§ 1 + å‚æ•°ï¼Œå±æ€§ 2â€¦â€¦&lt;/li&gt;
&lt;li&gt;åè®®ç‰ˆæœ¬å·	version + ç‰ˆæœ¬å·&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸Šé¢çš„ QoS ç­‰çº§ä¸º 0ï¼Œå°±æ˜¯æ²¡æœ‰ä»»ä½•å“åº”çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè¦æœ‰å“åº”ï¼Œå°±æŠŠå›ºå®šæŠ¥å¤´åŠ ä¸Š QoS ç­‰çº§ 1ï¼Œä¸º 32ï¼Œæ ¼å¼ä¸­è¿˜è¦åœ¨ Topic åé¢åŠ ä¸ŠæŠ¥æ–‡æ ‡è¯†ç¬¦ä¸¤ä¸ªå­—èŠ‚ã€‚&lt;/p&gt;
&lt;h2&gt;é˜¿é‡Œäº‘&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;CSDN çš„è¿æ¥æ•™ç¨‹ï¼š&lt;a href=&quot;https://blog.csdn.net/fang_dz999/article/details/112283742&quot;&gt;https://blog.csdn.net/fang_dz999/article/details/112283742&lt;/a&gt;
é˜¿é‡Œäº‘çš„å¸®åŠ©æ‰‹å†Œï¼š&lt;a href=&quot;https://help.aliyun.com/zh/iot/user-guide/device-properties-events-and-services?spm=a2c4g.11186623.0.0.598577e11gleH5&quot;&gt;https://help.aliyun.com/zh/iot/user-guide/device-properties-events-and-services?spm=a2c4g.11186623.0.0.598577e11gleH5&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åªæ”¯æŒ 0 å’Œ 1 çš„æœåŠ¡ç­‰çº§ã€‚&lt;/p&gt;
&lt;p&gt;a1yyeqgpsKm.iot-as-mqtt.cn-shanghai.aliyuncs.com :1883   ä¸»æœºåœ°å€&lt;/p&gt;
&lt;h3&gt;å‚æ•°ï¼ˆä»¥é˜¿é‡Œæ‰‹å†Œä¸ºä¸»ï¼‰&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆè®¾å¤‡ä¸‰å…ƒç»„æ˜¯è¿™ä¸ªï¼š&lt;/p&gt;
&lt;p&gt;{   &quot;ProductKey&quot;: &quot;a1yyeqgpsKm&quot;,   &quot;DeviceName&quot;: &quot;mqtt_fx&quot;,   &quot;DeviceSecret&quot;: &quot;3c2aadd7af6447d45fa661cf6adf309f&quot; }&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;./assets/image-20231116094703-zs09gmb.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å®¢æˆ·ç«¯ ID&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;*|securemode=2,signmethod=hmacsha256|&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;*è¡¨ç¤ºè®¾å¤‡åç§°ï¼Œæ³¨æ„æ›¿æ¢&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®¢æˆ·ç«¯ ID&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;äº§å“å + &amp;#x26; + è®¾å¤‡çš„ ProductKey&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯†ç ï¼ˆæ˜æ–‡æ ¼å¼å¯èƒ½ä¼šå˜ï¼Œçœ‹çœ‹å¹³å°çš„è¯´æ˜ï¼‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è®¾è®¡åˆ°åŠ å¯†åè®®ï¼šHmacSHA1&lt;/li&gt;
&lt;li&gt;æ‰¾ä¸€ä¸‹åŠ å¯†ç½‘ç«™ï¼Œç”¨ DeviceSecret ä½œä¸ºå¯†é’¥è¿›è¡Œæ˜æ–‡åŠ å¯†ï¼šclientld+ è®¾å¤‡å +deviceName+ è®¾å¤‡å +productKey+ è®¾å¤‡çš„å¯†é’¥&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ°å€      ç«¯å£ 1883&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;*.iot-as-mqtt.cn-shanghai.aliyuncs.com&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;*è¡¨ç¤ºè‡ªå·±è´¦å·çš„ ProductKeyï¼Œæ³¨æ„æ›¿æ¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;è‡ªå·±ç¼–å†™ä¸€æ³¢&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-markdown&quot;&gt;- æœåŠ¡å™¨ï¼ša1yyeqgpsKm.iot-as-mqtt.cn-shanghai.aliyuncs.com
- username_ç”¨æˆ·åï¼šmqtt_fx&amp;#x26;a1yyeqgpsKm

ä¸‹é¢è¿™å¯†ç æ˜¯åŠ å¯†è¿‡çš„
- passwdï¼šc86c95ef56cceaaa6a8334ef090d6d5c5fa07ca6eac25b0872806188adbad420
- clientID_å®¢æˆ·ç«¯IDï¼ša1yyeqgpsKm.mqtt_fx|securemode=2,signmethod=hmacsha256,timestamp=1691648594041|
- å‘å¸ƒå’Œè®¢é˜…ï¼š /a1yyeqgpsKm/${deviceName}/user/STM32F103C8T6

- å±æ€§ä¸ŠæŠ¥ï¼š	thing.event.property.post
- å±æ€§è®¾ç½®ï¼š	thing.service.property.set
- è®¾å¤‡å‘å¸ƒtopicï¼š	/sys/a1yyeqgpsKm/mqtt_fx/thing/event/property/post
- æµ‹è¯•å‘å¸ƒçš„æ•°æ®ï¼š{&quot;method&quot;:&quot;thing.event.property.post&quot;,&quot;id&quot;:&quot;23123123&quot;,&quot;params&quot;:{&quot;temp&quot;:63 ,&quot;humi&quot;:36},&quot;version&quot;:&quot;1.0.0&quot;}

# CONNECT è¿æ¥å®¢æˆ·ç«¯
10 b2 01 00 04 4d 51 54 54 04 c2 00 3c 00 4f 61 31 79 79 65 71 67 70 73 4B 6D 2E 6D 71 74 74 5F 66 78 7C 73 65 63 75 72 65 6D 6F 64 65 3D 32 2C 73 69 67 6E 6D 65 74 68 6F 64 3D 68 6D 61 63 73 68 61 32 35 36 2C 74 69 6D 65 73 74 61 6D 70 3D 31 36 39 31 36 34 38 35 39 34 30 34 31 7C 00 13 6D 71 74 74 5F 66 78 26 61 31 79 79 65 71 67 70 73 4B 6D 00 40 63 38 36 63 39 35 65 66 35 36 63 63 65 61 61 61 36 61 38 33 33 34 65 66 30 39 30 64 36 64 35 63 35 66 61 30 37 63 61 36 65 61 63 32 35 62 30 38 37 32 38 30 36 31 38 38 61 64 62 61 64 34 32 30

# CONNACK ç¡®è®¤è¿æ¥è¯·æ±‚
20 02 00 00

# PINGREQ å¿ƒè·³è¯·æ±‚
C0 00
&gt; å°¾å·´ 00-&gt;è¿æ¥æ¥å—  01-&gt;è¿æ¥æ‹’ç»ï¼Œä¸æ”¯æŒåè®®ç‰ˆæœ¬  02-&gt;è¿æ¥æ‹’ç»ï¼Œä¸åˆæ ¼çš„å®¢æˆ·ç«¯æ ‡è¯†ç¬¦
&gt; 03-&gt;è¿æ¥æ‹’ç»ï¼ŒæœåŠ¡ç«¯ä¸å¯ç”¨ 04-&gt;è¿æ¥æ‹’ç»,æ— æ•ˆçš„ç”¨æˆ·åæˆ–å¯†ç  05-&gt;è¿æ¥æ‹’ç»ï¼Œæœªæˆæƒ

# PINGRESP å¿ƒè·³å“åº”
D0 00

# DISCONNECT æ–­å¼€è¿æ¥
E0 00

# SUBSCRIBE è®¢é˜…ä¸»é¢˜
82 38 00 0A 00 33 2F 73 79 73 2F 61 31 79 79 65 71 67 70 73 4B 6D 2F 6D 71 74 74 5F 66 78 2F 74 68 69 6E 67 2F 73 65 72 76 69 63 65 2F 70 72 6F 70 65 72 74 79 2F 73 65 74 00

# SUBACK è®¢é˜…ç¡®è®¤
90 03 00 0A 01
&gt; ä¸­é—´çš„ 00 0A æ˜¯è®¢é˜…ä¸»é¢˜çš„æŠ¥æ–‡æ ‡è¯†ç¬¦ï¼Œç”¨æ¥è¡¨ç¤ºæ˜¯å›å¤ç»™è®¢é˜…ä¸»é¢˜çš„ 00 0A è®¾å¤‡ã€‚
&gt; è¿™é‡Œå°¾å·´æœ‰çš„è®²ã€‚ 00-&gt;æœ€å¤§QoS 0.  01-&gt;æˆåŠŸï¼Œæœ€å¤§QoS1.  02-&gt;æˆåŠŸï¼Œæœ€å¤§QoS2. 80-&gt;å¤±è´¥ã€‚
&gt; # é˜¿é‡Œäº‘æ¯”è¾ƒç‰¹æ®Šç¡®è®¤å›å¤çš„å…¨æ˜¯01ã€‚ #

# UNSUBSCRIBE å–æ¶ˆè®¢é˜…
A2 37 00 0A 00 33 2F 73 79 73 2F 61 31 79 79 65 71 67 70 73 4B 6D 2F 6D 71 74 74 5F 66 78 2F 74 68 69 6E 67 2F 73 65 72 76 69 63 65 2F 70 72 6F 70 65 72 74 79 2F 73 65 74

# UNSUBACK å–æ¶ˆè®¢é˜…ç¡®è®¤
B0 02 00 0A
&gt; 00 0A æ˜¯è®¢é˜…ä¸»é¢˜çš„æŠ¥æ–‡æ ‡è¯†ç¬¦ï¼Œç”¨æ¥è¡¨ç¤ºæ˜¯å–æ¶ˆè®¢é˜…ä¸»é¢˜çš„ 00 0A è®¾å¤‡ã€‚
&gt; 02 å‰©ä½™é•¿åº¦

# PUBLISH å‘å¸ƒæ¶ˆæ¯
30 9D 01 00 33 2F 73 79 73 2F 61 31 79 79 65 71 67 70 73 4B 6D 2F 6D 71 74 74 5F 66 78 2F 74 68 69 6E 67 2F 73 65 72 76 69 63 65 2F 70 72 6F 70 65 72 74 79 2F 73 65 74 7B 22 6D 65 74 68 6F 64 22 3A 22 74 68 69 6E 67 2E 73 65 72 76 69 63 65 2E 70 72 6F 70 65 72 74 79 2E 73 65 74 22 2C 22 69 64 22 3A 22 33 34 34 34 36 31 37 31 22 2C 22 70 61 72 61 6D 73 22 3A 7B 22 74 65 6D 70 22 3A 38 38 2C 22 68 75 6D 69 22 3A 37 37 7D 2C 22 76 65 72 73 69 6F 6E 22 3A 22 31 2E 30 2E 30 22 7D 
&gt; è¿™é‡Œå‘å¸ƒçš„æ˜¯QoSä¸º0çš„æ¶ˆæ¯ï¼Œæ²¡æœ‰ç¡®è®¤

# PUBACK å‘å¸ƒç¡®è®¤
40 02 7B 22 
&gt; 40 å›ºå®šæŠ¥å¤´ï¼Œ02 ä¸ºæ¥ä¸‹æ¥å‰©ä½™é•¿åº¦å›ºå®šä¸º2ï¼Œ7b 22 å‘å¸ƒæ¶ˆæ¯çš„æŠ¥æ–‡æ ‡è¯†ç¬¦ï¼ˆæ ‡è¯†ç¬¦å¿…é¡»æ˜¯2ä¸ªå­—èŠ‚ï¼‰
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ä¸Šä¼ æ ¼å¼&lt;/h3&gt;
&lt;p&gt;ä¸Šä¼ æ ¼å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;idï¼šString\æ¯ä¸ªè®¾å¤‡çš„å”¯ä¸€ IDï¼Œè‡ªå®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;paramsï¼šObject\è¯·æ±‚ä¸šåŠ¡çš„å‚æ•°ï¼Œé‡Œé¢æ˜¯ä¸€äº›å±æ€§å’Œæ•°å€¼ã€‚&lt;/li&gt;
&lt;li&gt;versionï¼šString\åè®®ç‰ˆæœ¬å·ï¼Œç›®å‰åè®®ç‰ˆæœ¬å·å”¯ä¸€å€¼ä¸º &lt;code&gt;1.0&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;methodï¼šString\è¯·æ±‚æ–¹æ³•ã€‚
&lt;ul&gt;
&lt;li&gt;å‘å¸ƒå±æ€§ï¼šthing.event.property.post&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;language-json&quot;&gt;{&quot;id&quot;:è‡ªå®šä¹‰è®¾å¤‡å”¯ä¸€ID, 
	&quot;params&quot;:{
		&quot;ç‰©æ¨¡å‹å±æ€§å1&quot;:æ•°æ®,
		&quot;ç‰©æ¨¡å‹å±æ€§å2&quot;:æ•°æ®
	},
	&quot;version&quot;:&quot;1.0&quot;,
	&quot;method&quot;:&quot;thing.event.property.post&quot;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;â€&lt;/p&gt;</content:encoded><h:img src="/_astro/2512-MqttProtocolAnalysis-banner.BU97JBLf.jpg"/><enclosure url="/_astro/2512-MqttProtocolAnalysis-banner.BU97JBLf.jpg"/></item></channel></rss>